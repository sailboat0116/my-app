<div class="container">
  <div class="card">
    <div class="header">
      <div class="logo">DB</div>
      <div>
        <h1>å ±å‘Šè³‡æ–™åº«æŸ¥è©¢</h1>
        <div class="muted">æ”¯æ´ç—…æ‚£è³‡è¨Šã€æ—¥æœŸç¯„åœèˆ‡é—œéµå­—æŸ¥è©¢ï¼Œé€£å‹• n8n Webhookã€‚</div>
      </div>
    </div>

    <div class="content">
      <!-- ç—…æ‚£è³‡è¨Š -->
      <div class="section-title">ç—…æ‚£è³‡è¨ŠæŸ¥è©¢</div>
      <div class="row">
        <div class="field">
          <label>è¼¸å…¥</label>
          <input type="text" placeholder="å¯è¼¸å…¥ç—…ç—‡æè¿°é—œéµå­—" [(ngModel)]="patientInput" />
        </div>
        <div class="field">
          <label>ç—…æ‚£åç¨±</label>
          <input type="text" placeholder="Patient Name" [(ngModel)]="patientName" />
        </div>
        <div class="field">
          <label>ç—…æ‚£è³‡è¨Š</label>
          <input type="text" placeholder="Patient Info" [(ngModel)]="patientInfo" />
        </div>
      </div>

      <!-- æ—¥æœŸç¯„åœ -->
      <div class="section-title">æ—¥æœŸç¯„åœæŸ¥è©¢</div>
      <div class="row">
        <div class="field">
          <label>é–‹å§‹æ—¥æœŸ</label>
          <input type="date" [(ngModel)]="dateFrom" />
        </div>
        <div class="field">
          <label>çµæŸæ—¥æœŸ</label>
          <input type="date" [(ngModel)]="dateTo" />
        </div>
      </div>

      <!-- æ“ä½œæŒ‰éˆ• -->
      <div class="actions">
        <button class="btn-primary" (click)="searchReports()">ğŸ” æŸ¥è©¢</button>
        <button class="btn-secondary" (click)="resetFilters()">â†º é‡è¨­</button>
      </div>

      <!-- æŸ¥è©¢çµæœ -->
      <div class="section-title">æŸ¥è©¢çµæœ</div>
      <div class="result">
        <div *ngIf="reports.length === 0" class="empty">{{ message }}</div>

        <table *ngIf="reports.length > 0">
          <thead>
            <tr>
              <th>#</th>
              <th>è¼¸å…¥</th>
              <th>ç—…æ‚£åç¨±</th>
              <th>ç—…æ‚£è³‡è¨Š</th>
              <th>æ—¥æœŸ</th>
              <th>è…«ç˜¤ä½ç½®</th>
              <th>è…«ç˜¤å¤§å°</th>
              <th>T åˆ†æœŸ</th>
              <th>N åˆ†æœŸ</th>
              <th>M åˆ†æœŸ</th>
              <th>Lung-RADS</th>
              <th>å…¶ä»–ç™¼ç¾</th>
              <th>å ±å‘Šå…§å®¹</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let r of reports; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ r.input || '' }}</td>
              <td>{{ r.patient_name || '' }}</td>
              <td>{{ r.patient_info || '' }}</td>
              <td>{{ r.created_at?.slice(0,10) || '' }}</td>
              <td>{{ r.tumor_location || '' }}</td>
              <td>{{ r.tumor_size_cm || '' }}</td>
              <td>{{ r.T_stage || '' }}</td>
              <td>{{ r.N_stage || '' }}</td>
              <td>{{ r.M_stage || '' }}</td>
              <td>{{ r.lung_rads_category || '' }}</td>
              <td>{{ r.other_findings || '' }}</td>
              <td>{{ r.report_text || '' }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

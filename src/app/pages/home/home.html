<div class="container">
  <h2>Imaging Report Form for the Lung Cancer</h2>

  <!-- 病歷編號 -->
  <label for="recordId">病歷編號:</label>
  <input type="text" id="recordId" name="recordId" [(ngModel)]="recordId" placeholder="輸入病歷編號" />

  <!-- 患者姓名 -->
  <label for="patientName">患者姓名:</label>
  <input type="text" id="patientName" name="patientName" [(ngModel)]="patientName" placeholder="輸入患者姓名" />

  <!-- 患者資料 -->
  <fieldset>
    <legend>患者資料</legend>
    <textarea id="patientInfo" name="patientInfo" [(ngModel)]="patientInfo" rows="3" cols="60" placeholder="輸入患者基本資料，例如年齡、性別、病史等"></textarea>
  </fieldset>

  <!-- 1. Imaging Date -->
  <label for="date">1. Imaging Date:</label>
  <input type="date" id="date" name="date" [(ngModel)]="date" />

  <!-- 2. Imaging Modality -->
  <fieldset>
    <legend>Imaging Modality:</legend>
    <label><input type="checkbox" [(ngModel)]="modalities.CT" /> CT scan</label><br/>
    <label><input type="checkbox" [(ngModel)]="modalities.MRI" /> MRI</label>
  </fieldset>

  <!-- 3. Tumor Location/Size -->
  <fieldset>
    <legend>2. Tumor Location / Size</legend>
    <label>Location:</label><br/>
    <label><input type="checkbox" [(ngModel)]="locations.RUL" /> Right upper lobe</label>
    <label><input type="checkbox" [(ngModel)]="locations.RML" /> Right middle lobe</label>
    <label><input type="checkbox" [(ngModel)]="locations.RLL" /> Right lower lobe</label><br/>
    <label><input type="checkbox" [(ngModel)]="locations.LUL" /> Left upper lobe</label>
    <label><input type="checkbox" [(ngModel)]="locations.LLL" /> Left lower lobe</label>
    <label><input type="text" [(ngModel)]="locations.Other" placeholder="Other" /></label><br/><br/>

    <label>Size:</label>
    <label><input type="radio" [(ngModel)]="size.type" value="Non-measurable" /> Non-measurable</label>
    <label><input type="radio" [(ngModel)]="size.type" value="Measurable" /> Measurable: <input type="text" [(ngModel)]="size.value" placeholder="cm (greatest dimension)" /></label>
  </fieldset>

  <!-- 4. Tumor Invasion -->
  <fieldset>
    <legend>3. Tumor Invasion (T Classification)</legend>
    <label><input type="checkbox" [(ngModel)]="T['Tx']" /> Tx: Primary tumor cannot be assessed</label><br/>
    <label><input type="checkbox" [(ngModel)]="T['T0']" /> T0: No evidence of primary tumor</label><br/>
    <label><input type="checkbox" [(ngModel)]="T['Tis']" /> Tis: Carcinoma in situ</label><br/>
    <label><input type="checkbox" [(ngModel)]="T['T1mi']" /> T1mi: Minimally invasive adenocarcinoma (≤3cm with ≤5mm invasion)</label><br/>
    <label><input type="checkbox" [(ngModel)]="T['T1a']" /> T1a: Tumor ≤1cm or limited to bronchial wall</label><br/>
    <label><input type="checkbox" [(ngModel)]="T['T1b']" /> T1b: Tumor >1cm but ≤2cm</label><br/>
    <label><input type="checkbox" [(ngModel)]="T['T1c']" /> T1c: Tumor >2cm but ≤3cm</label><br/>
    <label><input type="checkbox" [(ngModel)]="T['T2a']" /> T2a: Tumor >3cm but ≤4cm, or involves visceral pleura/adjacent lobe/main bronchus, or atelectasis/pneumonitis</label><br/>
    <label><input type="checkbox" [(ngModel)]="T['T2b']" /> T2b: Tumor >4cm but ≤5cm</label><br/>
    <label><input type="checkbox" [(ngModel)]="T['T3']" /> T3: Tumor >5cm but ≤7cm</label><br/>
    <label><input type="checkbox" [(ngModel)]="T['T4']" /> T4: Tumor >7cm</label><br/>
  </fieldset>

  <!-- 5. Lymph Node -->
  <fieldset>
    <legend>4. Regional Lymph Nodal involvement (N Classification)</legend>
    <label><input type="checkbox" [(ngModel)]="N['NX']" /> NX: Cannot assess</label><br/>
    <label><input type="checkbox" [(ngModel)]="N['N0']" /> N0: No involvement</label><br/>
    <label><input type="checkbox" [(ngModel)]="N['N1']" /> N1: Ipsilateral peribronchial, hilar, or intrapulmonary nodes</label><br/>
    <label><input type="checkbox" [(ngModel)]="N['N2']" /> N2: Ipsilateral mediastinal or subcarinal nodes</label><br/>
    <label><input type="checkbox" [(ngModel)]="N['N2a']" /> N2a: Single N2 station</label><br/>
    <label><input type="checkbox" [(ngModel)]="N['N2b']" /> N2b: Multiple N2 stations</label><br/>
    <label><input type="checkbox" [(ngModel)]="N['N3']" /> N3: Contralateral mediastinal/hilar/supraclavicular/scalene nodes</label>
  </fieldset>

  <!-- 6. Distant Metastasis -->
  <fieldset>
    <legend>5. Distant Metastasis (M Classification)</legend>
    <label><input type="checkbox" [(ngModel)]="M['M0']" /> M0: No distant metastasis</label><br/>
    <label><input type="checkbox" [(ngModel)]="M['M1']" /> M1: Distant metastasis</label><br/>
    <div style="margin-left: 20px;">
      <label><input type="checkbox" [(ngModel)]="M['M1a']" /> M1a: Pleural/pericardial nodules or effusion</label><br/>
      <label><input type="checkbox" [(ngModel)]="M['M1b']" /> M1b: Single extrathoracic metastasis</label><br/>
      <label><input type="checkbox" [(ngModel)]="M['M1c']" /> M1c: Multiple extrathoracic metastases</label><br/>
      <label><input type="checkbox" [(ngModel)]="M['M1c1']" /> M1c1: Single organ system</label><br/>
      <label><input type="checkbox" [(ngModel)]="M['M1c2']" /> M1c2: Multiple organ systems</label>
    </div>
  </fieldset>

  <!-- 7. Other Findings -->
  <fieldset>
    <legend>6. Other Findings</legend>
    <textarea id="otherFinding" rows="3" cols="60" [(ngModel)]="otherFinding" placeholder="Enter other findings here..."></textarea>
  </fieldset>

  <!-- 8. IMP -->
  <div class="imp-block">
    <label for="imp"><strong>IMP:</strong></label>
    <div class="imp-text">
      Lung cancer, preliminary imaging staging T
      <input type="text" class="small-input" maxlength="2" [(ngModel)]="IMP.T" />
      N
      <input type="text" class="small-input" maxlength="2" [(ngModel)]="IMP.N" />
      M
      <input type="text" class="small-input" maxlength="2" [(ngModel)]="IMP.M" />
      (AJCC 9th edition)
    </div>
  </div>

  <!-- 側邊按鈕 -->
  <div class="side-buttons">
    <button id="saveBtn" type="button" (click)="saveForm()">儲存</button>
    <button type="button" (click)="clearForm()">離開</button>
    <button id="findBtn" type="button" (click)="find()">查詢</button>
  </div>
</div>
